"use strict";!function(o){var t,a,i,n,s,r,d,c,u,g,l=Date.now(),f=0,p=window.innerHeight,e=Date.now(),w=Date.now(),m=0,h=0,v=0,y=navigator.userAgent,I=document.body,S=document.documentElement,C=Math.max(I.scrollHeight,I.offsetHeight,S.clientHeight,S.scrollHeight,S.offsetHeight),b=0,O=screen.width,k=screen.height,F=O+"*"+k,B=0,T=1,x=0,E=!1,L=0;tatsuFrontendConfig.goals=tatsuFrontendConfig.goals||{};function D(e,t,n){var a,o="";n&&((a=new Date).setTime(a.getTime()+24*n*60*60*1e3),o="; expires="+a.toUTCString()),document.cookie=e+"="+(t||"")+o+"; path=/"}function H(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null}function P(){H("swipepages_user")?t=H("swipepages_user"):(t=Math.random().toString(36).substring(2)+Date.now().toString(36),D("swipepages_user",t)),s&&r&&!H(s)&&D(s,r)}function A(){Math.abs(w-e)<3e4&&document.hasFocus()&&(f+=1),e=Date.now()}function U(){window.pageYOffset>m&&(window.pageYOffset>=p&&(v=1),Y(window.pageYOffset),m=window.pageYOffset,h=m),w=Date.now()}function j(){B=1,T=0;var e=o(this).data("tracking-href")||o(this).attr("href");-1<tatsuFrontendConfig.goals.links.indexOf(e)&&(c=1,"_blank"===o(this).attr("target")&&E&&(e={pageId:s,variantId:r,anchorConversionLink:c,id:g,userAgent:y},o.ajax({method:"POST",url:tatsuFrontendConfig.apiBaseUrl+"/analytics",data:JSON.stringify(e),contentType:"text/plain"})))}function M(){var e={userAgent:y,variantId:r,timeUserEntered:l,secondsSpentActively:f,timeSpentOnPage:i,screenWidth:O,pageLoadTime:a,screenHeight:k,percentageScrolled:b,scrolledPastViewPort:v,scrollDistance:h,exitRate:B,bounceRateLinks:T,trueBounce:x,anchorConversionLink:c,pageId:s,totalScreen:F,wasFormSubmitted:u,id:g,Create:!1};L&&(e.payment=L);var t=window.navigator,n=Date.now();b&&Math.abs(l-n)<a&&(x=1),i=n-l,e=JSON.stringify(e),E&&(t.sendBeacon?t.sendBeacon(tatsuFrontendConfig.apiBaseUrl+"/analytics",e):((t=new XMLHttpRequest).open("POST",tatsuFrontendConfig.apiBaseUrl+"/analytics",!1),t.setRequestHeader("Content-Type","application/json"),t.send(e)))}function R(){L=1}function J(){var a;window.addEventListener("scroll",U),window.addEventListener("mousemove",U),window.addEventListener("keypress",U),window.setInterval(A,1e3),window.addEventListener("paymentSuccess",R),tatsuFrontendConfig.goals.formSubmission&&(u=0,o(".tatsu-form").on("submit",N),a=0,o(document).ready(function(){var n=setInterval(function(){var e,t;a<10?(e=o(".hs-button"),t=o("iframe").contents().find(".hs-button"),0!=(t=o.merge(e,t)).length&&(clearInterval(n),t.on("click",function(){N()}))):clearInterval(n),a+=1},1e3)})),tatsuFrontendConfig.goals.linkClicks&&(c=0,o("a").on("click",j)),window.addEventListener("beforeunload",M)}var N=function(){var e;u=1,E&&(e={pageId:s,variantId:r,wasFormSubmitted:u,id:g,userAgent:y},o.ajax({method:"POST",url:tatsuFrontendConfig.apiBaseUrl+"/analytics",data:JSON.stringify(e),contentType:"text/plain"}))},Y=function(e){b=e/C*100,n=p/C,b+=n*=100};o(function(){var e;a=Date.now(),a-=l,s=document.getElementById("swipe-pages-page").value,r=document.getElementById("swipe-pages-variant").value,document.getElementById("swipe-pages-account")&&(d=document.getElementById("swipe-pages-account").value),!s||!r||(e=new URL(window.location.href)).searchParams.has("couponCode")&&e.searchParams.has("popupId")||(P(),e={variantId:r,pageId:s,Create:!0,userAgent:navigator.userAgent,cookie:t},d&&(e.accountId=d),d&&(e.accountId=d),o.ajax({method:"POST",url:tatsuFrontendConfig.apiBaseUrl+"/analytics",data:JSON.stringify(e),contentType:"text/plain"}).done(function(e){E=!0,g=e}).fail(function(e,t,n){console.log(n)}),J())})}(jQuery);